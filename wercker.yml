#The container definition we want to use for developing our app
build:

  box:
    id: quay.io/fmwplt/12213-domain-novol
    username: $QUAY_IO_USERNAME
    password: $QUAY_IO_PASSWORD
    tag: latest
    cmd: /bin/bash

  steps:
   - script:
     name: "Build the Project -> HelloWorld Web Application"
     code: |
       echo `pwd`
       echo "Building the artifacts required to create HelloWorld web application."
       mvn clean install
       echo ""
       echo "Checking the ["`pwd`"] directory contents :"
       ls -ltr *

   - script:
      name: "Copy the built/compiled artifacts of Web Application"
      code: |
       echo `pwd`
       echo ""
       echo "Copying the built HelloWorldEAR Web Application to required location."
       mkdir /u01/oracle/HelloWorld
       cp resources/HelloWorldEAR.ear /u01/oracle/HelloWorld/.; echo ""
       echo "Changing the permissions for the compiled artifacts."
       chmod 777 /u01/oracle/HelloWorld/*; echo ""
       echo "Checking the ["`pwd`"] directory contents :"
       ls -ltr *;echo ""
       echo "Checking the [/u01/oracle/] directory contents"
       ls -ltr /u01/oracle/HelloWorld/*

#   - internal/docker-push:
#      name: push the operator image to repo
#      username: $GCR_IO_USERNAME
#      password: $GCP_KEY_JSON
#      repository: gcr.io/fmwplt-gcp/12213-domain-novol
#      tag: $WERCKER_GIT_COMMIT
#      working-dir: /u01/oracle/user_projects/domains/base_domain
#      cmd: startWebLogic.sh
#      registry: https://gcr.io/v2
#
#
#deploy-to-kubernetes:
#    box: golang
#    steps:
#
#    - bash-template
#
#    - script:
#        name: prepare kubernetes files
#        code: |
#          mkdir $WERCKER_OUTPUT_DIR/kubernetes
#          mv k8s-*.yml $WERCKER_OUTPUT_DIR/kubernetes
#    - riceo/kubectl:
#        name: deploy to kubernetes
#        server: $KUBERNETES_MASTER
#        gcloud-key-json: $GCP_KEY_JSON
#        gke-cluster-name: $GKE_CLUSTER_NAME
#        gke-cluster-zone: $GKE_CLUSTER_ZONE
#        gke-cluster-project: $GKE_CLUSTER_PROJECT
#command: apply -f $WERCKER_OUTPUT_DIR/kubernetes/